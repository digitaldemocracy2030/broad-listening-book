# 第7章 DD2030による広聴AIの開発活動

tokorotenとnishioとsuminoが書く

## デジタル民主主義2030 について


## 時系列メモ
2024都知事選　西尾＆M氏
2024衆院選(日テレ)　すみの
2024/11~ シン東京2050　西尾、すみの
2025/1~ DD2030設立
2025/1 Devinの投入、5月頃Github Copilot Agent、6月頃 Clude code
2025/3 ~OSS化
2025/5 安野がチームみらいを結党、立候補
2025メインエンジニアが立候補して、開発リソースが枯渇

## 広聴AIの技術的系譜

![広聴AIの技術的系譜](images/07_kouchouai_technical_genealogy.png)

memo: suminoの記事に画像をマージする

## 広聴AI 開発の背景と目的

memo: suminoの記事へつなげる

## 5月以降の開発

執筆したいことメモ
- 5月以降、広聴AIの開発は減速と加速が同時に起こった
- 安野がチームみらいの結党により、DD2030の理事から抜けて、1メンバーになった
  - 安野の強いリーダーシップが喪失
  - 多くの開発者がチームみらいの側に移動、DD2030に閑古鳥が鳴く
  - 主要開発者のsuminoが、チームみらいから立候補して、開発速度が急減
- Github Copilot Agentの一般公開、Claude Codeの一般公開により、AIプログラミングが本格化
- 西尾はチームみらいを支援しつつ、DD2030で開発を継続
- tokoroten はブロードリスニングの概念を広めるために、チームみらいに合流せず
  - tokorotenによる広聴AIの技術解説のプレゼン資料が公開される
  - これが本書が書かれるキッカケになる
- チームみらい版のfork、マージ
- フリーランスエンジニアのOHKIによる、政党や自治体へのサポート業務
- 安野は離れたけど、死んでないよ



## メジャーバージョンアップ　メモ

広聴AIは2025年2月の初回コミットから約1年で807本のPRがマージされ、急速に進化してきた。以下にメジャーバージョンごとの主な改修内容を示す。

### v1.0.0（2025年4月29日）初期リリース

PR約40本。APIサーバーの実装、Docker対応、クラスタリング結果の可視化UI、CSV処理機能、GitHub Actions CIの整備など、基盤となる機能が一通り揃った最初のリリースである。

### v2.0.0（2025年4月29日）大規模機能拡張

PR100本以上。Azure OpenAI対応とAzureデプロイ環境の整備により、企業や自治体での導入が容易になった。静的HTMLビルド・エクスポート機能によりGitHub Pagesでの公開が可能となり、Googleスプレッドシートからの入力やShift-JIS CSVへの対応など、日本の現場で求められるデータ入力形式を幅広くサポートした。LLMの出力安定化のためにStructured Outputを導入し、JSONフォーマットの確実な取得を実現した。レポートの公開/非公開切り替え、削除機能、OGPカード対応なども追加された。コード品質面では、Biomeによるlint導入、langchain依存の除去が行われた。

### v2.1.0（2025年5月15日）用語統一・ローカルLLM対応

PR約40本。UIの用語を「クラスタ」から「意見グループ」へ統一し、非技術者にもわかりやすい表現に改めた。ローカル環境での埋め込み処理に対応し、外部APIを使わずにテキストのベクトル化が可能になった。散布図のズーム・パン機能、属性フィルタ、CSVカラムの自動選択アルゴリズムを追加し、分析の操作性を向上させた。LLMプロバイダとしてOpenRouterやollamaを選択可能にし、OpenAI以外のモデルも利用できるようになった。APIキー検証UI、E2Eテスト基盤、トークン使用量の追跡機能も導入された。

### v3.0.0（2025年5月30日）セグメントビュー・フィルタ機能

PR約30本。OpenRouterサポートの正式化に加え、セグメントビュー（全体表示/強い意見/階層表示の切り替え）を実装し、大量の意見を多角的に閲覧できるようになった。文字列検索フィルタにより特定のキーワードを含む意見を素早く探せるようになり、意見グループのタイトル・説明文を手動で編集する機能も追加された。レポート生成のコスト見積もり表示機能を実装し、利用者がAPI費用を事前に把握できるようにした。チームみらいのフォークで先行開発された機能群のマージも行われた。

### v4.0.0（2025年12月27日）管理画面刷新・Gemini対応

PR約80本。管理画面をServer Functions/Server Componentsベースに全面移行し、デザインシステムのトークンとコンポーネントを刷新した。GoogleのGemini LLMをレポート生成に利用可能にし、LLMの選択肢をさらに拡大した。用語集ページとグローバルナビゲーションの追加、全画面ダイアログの実装、レポート単位でのHTML出力機能など、利用者向けの改善が多数含まれる。GitHub ActionsによるAzure CDパイプラインの構築、E2Eテストの拡充（管理画面、クライアント、静的HTML）により、開発・運用の自動化も大きく進んだ。

### v4.0.0以降（2026年1月〜）アーキテクチャ改善

安定したコア機能と実験的な拡張を分離するコア/プラグインアーキテクチャの導入が行われた。データ処理ライブラリをpandasからpolarsへ全面移行し、処理性能の向上を図った。Next.jsを15系から16系へアップグレードし、Dockerイメージの大幅な縮小（APIイメージが約34GBから約2.7GBへ）を実現した。散布図に「詳細クラスタ」タブと凸包表示オプションを追加し、可視化機能を強化した。MkDocs Materialによるドキュメントサイトの構築も進められている。



-----

**v1.0.0（2025-04-29）— 初期リリース**
- PR #1〜#64（約40PR）
- APIサーバー実装、Docker対応、クラスタUI、CSV処理、GitHub Actions CI
- 本番環境セキュリティ（OpenAPI UI非表示）

**v2.0.0（2025-04-29）— 大規模機能拡張**
- PR #65〜#384（100以上のPR）
- Azure OpenAI対応・Azureデプロイ環境整備
- 静的HTMLビルド・エクスポート（GitHub Pages対応）
- Googleスプレッドシート入力対応
- Shift-JIS CSV対応
- Structured OutputでLLMのJSON出力を安定化
- レポートの公開/非公開切り替え、削除機能
- OGPカード、ISR対応
- クラスタ数推奨機能、色バリエーション20→40
- langchain依存の除去
- Biomeによるlint導入、APIレートリミット対応

**v2.1.0（2025-05-15）— 用語統一・ローカルLLM対応**
- PR #387〜#521（約40PR）
- 用語統一：「クラスタ」→「意見グループ」
- ローカル埋め込み処理対応
- 散布図のズーム・パン機能
- 属性フィルタ
- LLMプロバイダ選択（OpenRouter、ollama等）
- CSVカラム自動選択アルゴリズム
- APIキー検証UI、E2Eテスト基盤、トークン使用量追跡

**v3.0.0（2025-05-30）— セグメントビュー・フィルタ機能**
- PR #525〜#582（約30PR）
- OpenRouterサポート正式化
- セグメントビュー（全体/強い意見/階層の切り替え）
- 文字列検索フィルタ
- 意見グループのタイトル・説明の手動編集
- コスト見積もり表示
- team-miraiフォークからの機能マージ

**v4.0.0（2025-12-27）— 管理画面刷新・Gemini対応**
- PR #574〜#739（約80PR）
- 管理画面の大規模リファクタリング（Server Functions/Components移行、デザインシステム刷新）
- Gemini LLMサポート
- 用語集ページ・グローバルナビゲーション
- 全画面ダイアログ
- レポート単位のHTML出力
- GitHub ActionsによるAzure CD
- E2Eテスト拡充（admin, client, 静的HTML）
- セキュリティ修正（CVE-2025-55182）

**v4.0.0以降〜現在（2026-01〜02）— アーキテクチャ改善**
- コア/プラグイン分離 (#746) — 安定コアと実験的拡張の分離
- pandas→polars移行 (#753, #774, #781) — データ処理ライブラリの全面切り替え
- MkDocs Materialによるドキュメントサイト構築 (#754)
- Next.js 15→16アップグレード (#773)
- Dockerイメージ大幅縮小 (#807) — APIイメージ約34GB→約2.7GB
- 散布図「詳細クラスタ」タブ＋凸包表示 (#798)
- google-generativeai→google-genaiへの移行 (#779)


